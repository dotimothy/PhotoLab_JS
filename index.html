<!DOCTYPE html> 
<head>
	<title>PhotoLab in JS</title>
	 <link href='https://fonts.googleapis.com/css?family=Product+Sans' rel='stylesheet' type='text/css'>
</head>

<style>
	h1, h2 {
		font-family: 'Product Sans', Arial, sans-serif;
	}
</style>

<script>
	
	function loadImage(name){
		var image = document.getElementById(name);
		var canvas = document.getElementById("workspace");
		var ctx = canvas.getContext("2d");
		ctx.drawImage(image,0,0,canvas.width,canvas.height);	
	}

	//Ages the Photo
	function age() {
		var canvas = document.getElementById("workspace");
		var ctx = canvas.getContext("2d");
		var imgData = ctx.getImageData(0,0,canvas.width,canvas.height);
		console.log(imgData);
		for(var i = 0; i < imgData.data.length; i += 4) {
			var red = imgData.data[i];
			var green = imgData.data[i + 1];
			var blue = imgData.data[i + 2];
			var alpha = imgData.data[i + 3];
			var age = (red + green + blue) / 5;
			imgData.data[i] = age * 1.6;
			imgData.data[i + 1] = age * 1.6;
			imgData.data[i + 2] = age;
			imgData.data[i + 3] = alpha;
		}
		 ctx.putImageData(imgData, 0, 0);
	}

	//Changes whatever in Canvas to Black And White
	function blackAndWhite() {
		var canvas = document.getElementById("workspace");
		var ctx = canvas.getContext("2d");
		var imgData = ctx.getImageData(0,0,canvas.width,canvas.height);
		console.log(imgData);
		for(var i = 0; i < imgData.data.length; i += 4) {
			var red = imgData.data[i];
			var green = imgData.data[i + 1];
			var blue = imgData.data[i + 2];
			var alpha = imgData.data[i + 3];
			var grayscale = (red + green + blue) / 3;
			imgData.data[i] = grayscale;
			imgData.data[i + 1] = grayscale;
			imgData.data[i + 2] = grayscale;
			imgData.data[i + 3] = alpha;
		}
		 ctx.putImageData(imgData, 0, 0);
	}

	//Inverts All Colors
	function inversion() {
		var canvas = document.getElementById("workspace");
		var ctx = canvas.getContext("2d");
		var imgData = ctx.getImageData(0,0,canvas.width,canvas.height);
		console.log(imgData);
		for(var i = 0; i < imgData.data.length; i += 4) {
			var red = imgData.data[i];
			var green = imgData.data[i + 1];
			var blue = imgData.data[i + 2];
			var alpha = imgData.data[i + 3];
			imgData.data[i] = 255 - red;
			imgData.data[i + 1] = 255 - green;
			imgData.data[i + 2] = 255 - blue;
			imgData.data[i + 3] = alpha;
		}
		 ctx.putImageData(imgData, 0, 0);
	}

	//Switches R&G Color Channels
	function xRG() {
		var canvas = document.getElementById("workspace");
		var ctx = canvas.getContext("2d");
		var imgData = ctx.getImageData(0,0,canvas.width,canvas.height);
		console.log(imgData);
		for(var i = 0; i < imgData.data.length; i += 4) {
			var red = imgData.data[i];
			var green = imgData.data[i + 1];
			var blue = imgData.data[i + 2];
			var alpha = imgData.data[i + 3];
			imgData.data[i] = green;
			imgData.data[i + 1] = red;
			imgData.data[i + 2] = blue;
			imgData.data[i + 3] = alpha;
		}
		 ctx.putImageData(imgData, 0, 0);
	}

	//restarts canvas
	function restart() {
		var canvas = document.getElementById("workspace");
		var ctx = canvas.getContext("2d");
		ctx.fillStyle = "#FFFFFF"
		ctx.fillRect(0,0,canvas.width,canvas.height);
	}

	//loads test image and unhides filter div
	function test() {
		loadImage("goldengate");
		document.getElementById("filters").hidden = false;
	}

</script>

<body>
	<h1>PhotoLab in Javascript</h1>
	<img hidden id="goldengate" src="goldengate.jpg">
	<button onclick="test()">Load Test Image: Golden Gate</button>
	<br></br>
	<canvas id="workspace" width="896" height="577" style="border:2px solid #000000;">
	</canvas>
	<br></br>

	<button onclick="restart()">Restart</button>

	<div hidden id="filters">
		<h2>Filters:</h2> 
		<button onclick="age()">Age</button>
		<button onclick="blackAndWhite()">Black and White</button>
		<button onclick="inversion()">Invert</button>
		<button onclick="xRG()">xRG</button>
		
	</div>

	<footer>
		<h2>Made by <a href="https://dotimothy.github.io">@Timothy Do. </a>All Rights Reserved under the MIT License.</h2>
	</footer>
</body>

</html>